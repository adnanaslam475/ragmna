<section class="insurance-top">
  <div class="insurance-top__inner">
    <div class="insurance-top__heading">
      <h1 class="insurance-top__heading-title">
        {{ "eval" | translate }} <br />
        {{ "qt" | translate }}!
      </h1>
      <h2 class="top-screen__subtitle_car">{{ "join" | translate }}</h2>
      <h2 class="top-screen__subtitle_car_mobile">
        {{ "join" | translate }}
      </h2>
    </div>

    <div class="insurance-top__form">
      <div class="main-form">
        <div class="main-form__group" *ngIf="currentstep == 'STEP1'">
          <button
            type="button"
            class="btn btn--big"
            (click)="createNewQuote('LAND')"
          >
            {{ "land" | translate }}
            <svg
              width="12px"
              height="19px"
              viewBox="0 0 12 19"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g
                  transform="translate(-1129.000000, -420.000000)"
                  fill="#FFFFFF"
                  fill-rule="nonzero"
                >
                  <polygon
                    points="1129.495 436.12 1136.215 429.4 1129.495 422.715 1131.56 420.65 1140.31 429.4 1131.56 438.15"
                  ></polygon>
                </g>
              </g>
            </svg>
          </button>
        </div>
        <div class="main-form__group" *ngIf="currentstep == 'STEP1'">
          <button
            type="button"
            class="btn btn--big"
            (click)="createNewQuote('BUILDING')"
          >
            {{ "building" | translate }}
            <svg
              width="12px"
              height="19px"
              viewBox="0 0 12 19"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g
                  transform="translate(-1129.000000, -420.000000)"
                  fill="#FFFFFF"
                  fill-rule="nonzero"
                >
                  <polygon
                    points="1129.495 436.12 1136.215 429.4 1129.495 422.715 1131.56 420.65 1140.31 429.4 1131.56 438.15"
                  ></polygon>
                </g>
              </g>
            </svg>
          </button>
        </div>
        <div class="main-form__group" *ngIf="quoteno != ''">
          <button type="button" class="btn btn--big">
            {{ "urquote" | translate }} {{ quoteno }}
          </button>
        </div>
        <div class="main-form__cta">
          <div class="main-form__cta-arrow">
            <svg
              width="33px"
              height="53px"
              viewBox="0 0 33 53"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g
                  transform="translate(-660.000000, -368.000000)"
                  fill="#00CCFF"
                >
                  <path
                    d="M675.795292,395.672233 C675.957807,402.350577 678.328299,408.261003 682.906769,413.40351 C686.995914,417.99641 692.651986,420.344018 699.874986,420.446332 C700.325788,420.452718 700.716572,420.759967 700.829149,421.196533 C700.967056,421.731325 700.645317,422.276655 700.110524,422.414558 C698.022091,422.953103 695.430217,423.259966 692.3349,423.335147 C682.187574,422.878819 674.889755,418.122621 669.943491,411.365286 C666.770037,407.029874 664.8557,401.798856 664.200481,395.672233 L656.797978,395.672233 C656.245694,395.672233 655.797978,395.224517 655.797978,394.672233 C655.797978,394.433105 655.883668,394.201893 656.03951,394.020522 L669.458516,378.403326 C669.818446,377.984436 670.449804,377.936639 670.868694,378.296569 C670.907533,378.329941 670.943752,378.366247 670.97703,378.405167 L684.33036,394.022363 C684.689273,394.442125 684.639946,395.073365 684.220184,395.432278 C684.03907,395.587138 683.808608,395.672233 683.570314,395.672233 L675.795292,395.672233 Z"
                    id="Combined-Shape"
                    transform="translate(675.638361, 400.658721) scale(-1, 1) rotate(-120.000000) translate(-675.638361, -400.658721) "
                  ></path>
                </g>
              </g>
            </svg>
          </div>
          <div class="main-form__cta-mobile"></div>
        </div>
      </div>
    </div>
    <section
      class="section section--inner section--nomargin"
      *ngIf="currentstep == 'STEP2'"
    >
      <div class="what-we-do__grid what-we-do">
        <div class="what-we-do__image">
          <form
            class="contact-form-container contact-form"
            [formGroup]="form"
            (ngSubmit)="savePersonalInfo()"
          >
            <div class="form-group">
              <label for="first-name">{{ "fname" | translate }}</label>
              <input
                name="firstName"
                type="text"
                placeholder="First Name"
                formControlName="fname"
                [ngClass]="{
                  'is-invalid': submitted && f['fname'].errors
                }"
              />
              <div
                *ngIf="submitted && f['fname'].errors"
                class="invalid-feedback"
              >
                <div *ngIf="f['fname'].errors['required']">
                  {{ "fnameerr" | translate }}
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="last-name"> {{ "lname" | translate }}</label>
              <input
                name="lastName"
                type="text"
                formControlName="lname"
                placeholder="Last Name"
              />
            </div>
            <div class="form-group">
              <label for="email"> {{ "email" | translate }}</label>
              <input
                name="email"
                type="email"
                formControlName="email"
                [ngClass]="{
                  'is-invalid': submitted && f['email'].errors
                }"
                placeholder="Email Address"
              />
              <div
                *ngIf="submitted && f['email'].errors"
                class="invalid-feedback"
              >
                <div *ngIf="f['email'].errors['required']">
                  {{ "emailerr" | translate }}
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="phone-number"> {{ "phone" | translate }}</label>
              <input
                name="phone"
                type="text"
                formControlName="phone"
                [ngClass]="{
                  'is-invalid': submitted && f['phone'].errors
                }"
                placeholder="Phone Number"
              />
              <div
                *ngIf="submitted && f['phone'].errors"
                class="invalid-feedback"
              >
                <div *ngIf="f['phone'].errors['required']">
                  {{ "phoneerr" | translate }}
                </div>
              </div>
            </div>

            <div class="contact-button-wrapper">
              <button class="contact-button btn btn--big" type="submit">
                {{ "next" | translate }}
              </button>
            </div>
          </form>
        </div>

        <div class="what-we-do__content">
          <h3 class="what-we-do__title">
            {{ "personal" | translate }}
          </h3>
          <div class="what-we-do__text">
            <p>
              {{ "personalquote" | translate }}
            </p>
          </div>
        </div>
      </div>
    </section>
    <section
      class="section section--inner section--nomargin"
      *ngIf="currentstep == 'STEP3'"
    >
      <div class="what-we-do__grid what-we-do">
        <div class="what-we-do__image">
          <form
            class="contact-form-container contact-form"
            [formGroup]="form2"
            (ngSubmit)="saveCompanyInfo()"
          >
            <div class="form-group">
              <label for="first-name">{{ "companyname" | translate }}</label>
              <input
                name="firstName"
                type="text"
                placeholder="Company Name"
                formControlName="companyname"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <label for="last-name">{{ "companyadd" | translate }}</label>
              <input
                name="lastName"
                type="text"
                class="form-control"
                formControlName="companyaddress"
                placeholder="Company Address"
              />
            </div>

            <div class="form-group">
              <label for="phone-number">{{ "companyphone" | translate }}</label>
              <input
                name="phone"
                type="number"
                class="form-control"
                formControlName="companyphone"
                placeholder="Phone Number"
              />
            </div>

            <div class="contact-button-wrapper">
              <button class="contact-button btn btn--big" type="submit">
                {{ "next" | translate }}
              </button>
            </div>
          </form>
        </div>

        <div class="what-we-do__content">
          <h3 class="what-we-do__title">
            {{ "companyinfo" | translate }}
          </h3>
          <div class="what-we-do__text">
            <p>
              {{ "personalquote" | translate }}
            </p>
          </div>
        </div>
      </div>
    </section>

    <section
      class="section section--inner section--nomargin"
      *ngIf="currentstep == 'STEP5'"
    >
      <div class="what-we-do__grid">
        <div class="what-we-do__image">
          <form
            class="contact-form-container contact-form"
            [formGroup]="form4"
            (ngSubmit)="savePropertyInfo()"
          >
            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="first-name">
                    {{ "typeofproperty" | translate }}</label
                  >

                  <select
                    formControlName="typecd"
                    class="form-select"
                    (change)="setBuildingType()"
                  >
                    <option value="">{{ "selectproperty" | translate }}</option>
                    <option value="Land">{{ "land" | translate }}</option>
                    <option value="Building">
                      {{ "building" | translate }}
                    </option>
                  </select>
                  <div
                    *ngIf="submitted && f4['typecd'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['typecd'].errors['required']">
                      {{ "typeerr" | translate }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label for="first-name">{{
                    "selectpurpose" | translate
                  }}</label>

                  <select formControlName="purposeid" class="form-select">
                    <option value="">Select Purpose</option>
                    <option *ngFor="let al of purposeList" value="{{ al.id }}">
                      {{ al.title }} ({{ al.title_ar }})
                    </option>
                  </select>
                  <div
                    *ngIf="submitted && f4['purposeid'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['purposeid'].errors['required']">
                      {{ "purposeerr" | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="first-name"> {{ "totalprop" | translate }}</label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Total Property"
                    formControlName="totalprop"
                    min="0"
                    [ngClass]="propertyList.length > 0 ? 'dis' : ''"
                  />
                  <div
                    *ngIf="submitted && f4['totalprop'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['totalprop'].errors['required']">
                      {{ "noofproperr" | translate }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label for="first-name"> {{ "totaleva" | translate }}</label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Total Evalutor"
                    formControlName="totaleveneed"
                    min="0"
                  />
                  <div
                    *ngIf="submitted && f4['totaleveneed'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['totaleveneed'].errors['required']">
                      {{ "noofevaerr" | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="first-name">
                    {{ "selectcountry" | translate }}</label
                  >
                  <select
                    class="form-select"
                    formControlName="country"
                    (change)="getRegionByCountry()"
                  >
                    <option value="">{{ "selectcountry" | translate }}</option>
                    <option *ngFor="let al of countryList" value="{{ al.id }}">
                      {{ al.title }} ({{ al.title_ar }})
                    </option>
                  </select>

                  <div
                    *ngIf="submitted && f4['country'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['country'].errors['required']">
                      {{ "countryerr" | translate }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label for="first-name">{{
                    "selectregion" | translate
                  }}</label>
                  <select
                    class="form-select"
                    formControlName="region"
                    (change)="getCityByRegion()"
                  >
                    <option value="">{{ "selectregion" | translate }}</option>
                    <option *ngFor="let al of regionList" value="{{ al.id }}">
                      {{ al.title }} ({{ al.title_ar }})
                    </option>
                  </select>
                  <div
                    *ngIf="submitted && f4['region'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['region'].errors['required']">
                      {{ "regionerr" | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-6 mt-2">
                  <label for="first-name">
                    {{ "selectcity" | translate }}</label
                  >
                  <select
                    class="form-select"
                    formControlName="city"
                    (change)="getDistrictByCity()"
                  >
                    <option value="">{{ "selectcity" | translate }}</option>
                    <option *ngFor="let al of cityList" value="{{ al.id }}">
                      {{ al.title }} ({{ al.title_ar }})
                    </option>
                  </select>
                  <div
                    *ngIf="submitted && f4['city'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['city'].errors['required']">
                      {{ "cityerr" | translate }}
                    </div>
                  </div>
                </div>
                <div class="col-md-6 mt-2" *ngIf="iscityrestricted">
                  <label>{{ "isthiscity" | translate }}</label>
                  <select
                    class="form-select"
                    formControlName="cityrestrictedval"
                  >
                    <option value="0">{{ "no" | translate }}</option>
                    <option value="1">{{ "yes" | translate }}</option>
                  </select>
                </div>
                <div class="col-md-6 mt-2">
                  <label for="first-name">{{
                    "selectdistrict" | translate
                  }}</label>
                  <select
                    class="form-select"
                    formControlName="district"
                    (change)="getDistrictRestriction()"
                  >
                    <option value="">{{ "selectdistrict" | translate }}</option>
                    <option *ngFor="let al of districtList" value="{{ al.id }}">
                      {{ al.title }} ({{ al.title_ar }})
                    </option>
                  </select>
                  <div
                    *ngIf="submitted && f4['district'].errors"
                    class="invalid-feedback"
                  >
                    <div *ngIf="f4['district'].errors['required']">
                      {{ "districterr" | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <label for="first-name">{{ "landsize" | translate }}</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="land_size"
                    min="0"
                  />
                </div>
                <div class="col-md-6" *ngIf="isthisbuilding">
                  <label for="first-name">{{
                    "buildingsize" | translate
                  }}</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="building_size"
                    min="0"
                  />
                </div>
              </div>
            </div>
            <div class="contact-button-wrapper">
              <button class="contact-button btn btn--big mr-3" type="submit">
                {{ "add" | translate }}
              </button>
            </div>
          </form>
        </div>

        <div class="what-we-do__content">
          <table class="table">
            <thead>
              <tr>
                <td>#</td>
                <td>{{ "typeofproperty" | translate }}</td>
                <td>{{ "country" | translate }}</td>
                <td>{{ "region" | translate }}</td>
                <td>{{ "city" | translate }}</td>
                <td>{{ "district" | translate }}</td>
                <td>{{ "landsize" | translate }}</td>
                <td>{{ "buildingsize" | translate }}</td>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let al of propertyList; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ al.typecd }}</td>
                <td>{{ al.country }}</td>
                <td>{{ al.region }}</td>
                <td>{{ al.city }}</td>
                <td>{{ al.district }}</td>
                <td>{{ al.land_size }}</td>
                <td>{{ al.building_size }}</td>
              </tr>
            </tbody>
          </table>
          <button
            class="contact-button btn btn--big mt-3"
            type="button"
            *ngIf="propertyList.length > 0"
            (click)="setOrderAndGetQuote(modalCenter)"
          >
            {{ "order" | translate }}
          </button>
        </div>
      </div>
    </section>
    <section
      class="section section--inner section--nomargin"
      *ngIf="currentstep == 'STEP6'"
    >
      <div class="what-we-do__grid">
        <div class="row col-12" *ngIf="payAmount && payAmount > 0">
          <div class="col-md-4"></div>
          <div class="col-md-4">
            <button type="button" class="btn btn--big">
              SAR {{ payAmount }}
            </button>
          </div>
          <div class="col-md-4"></div>
        </div>
        <div class="row col-12">
          <table class="table">
            <thead>
              <tr>
                <td>#</td>
                <td>{{ "typeofproperty" | translate }}</td>
                <td>{{ "country" | translate }}</td>
                <td>{{ "region" | translate }}</td>
                <td>{{ "city" | translate }}</td>
                <td>{{ "district" | translate }}</td>
                <td>{{ "landsize" | translate }}</td>
                <td>{{ "buildingsize" | translate }}</td>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let al of propertyList; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ al.typecd }}</td>
                <td>{{ al.country }}</td>
                <td>{{ al.region }}</td>
                <td>{{ al.city }}</td>
                <td>{{ al.district }}</td>
                <td>{{ al.land_size }}</td>
                <td>{{ al.building_size }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row col-12" *ngIf="existsmsg && existsmsg != ''">
          <div class="col-md-2"></div>
          <div class="col-md-8">
           <h3 style="color:#2ba92b"> {{ existsmsg }} </h3>
          </div>
          <div class="col-md-2"></div>
        </div>
       
        <div class="row col-12">
          <div class="col-md-4"></div>
          <div class="col-md-4">
            <div class="mysr-form mt-4"></div>
          </div>
          <div class="col-md-4"></div>

          <!-- <button class="contact-button btn btn--big mt-3" type="button">
            Pay Now {{payAmount}}
          </button> -->
        </div>
      </div>
    </section>
  </div>
</section>
<section class="section section--inner section--nomargin"></section>
<ng-template #modalCenter let-modal>
  <form [formGroup]="formlogin" (ngSubmit)="onLoginProcess()">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalCenterTitle">
          {{ "signinsignup" | translate }}
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
          (click)="modal.dismiss('Close')"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input
              type="text"
              class="form-control"
              placeholder="Enter username"
              autofocus
              formControlName="username"
              [ngClass]="{
                'is-invalid': submitted && flogin['username'].errors
              }"
            />
            <div
              *ngIf="submitted && flogin['username'].errors"
              class="invalid-feedback"
            >
              <div *ngIf="flogin['username'].errors['required']">
                Email address is required
              </div>
              <div *ngIf="flogin['username'].errors['email']">
                Invalid email address
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label" for="password-input">Password</label>
            <div class="position-relative auth-pass-inputgroup mb-3">
              <input
                type="password"
                class="form-control pe-5"
                placeholder="Enter password"
                formControlName="password"
                [ngClass]="{
                  'is-invalid': submitted && flogin['password'].errors
                }"
              />
              <div
                *ngIf="submitted && flogin['password'].errors"
                class="invalid-feedback"
              >
                <div *ngIf="flogin['password'].errors['required']">
                  Password is required
                </div>
              </div>
            </div>
          </div>

          <div class="mt-4">
            <button class="btn btn--big" type="submit" *ngIf="!isloading">
              {{ "signinsignup" | translate }}
            </button>
            <button type="submit" class="btn btn--big" *ngIf="isloading">
              <span class="spinner-border" role="status" aria-hidden="true">
              </span>
            </button>
          </div>
        </div>
      </div>
      <div class="modal-footer"></div>
    </div>
  </form>
</ng-template>
<app-loader *ngIf="loading"></app-loader>
